{"version":3,"sources":["webpack:///billiard-element.min.js","webpack:///webpack/bootstrap ea91e8013d6f9a30918b","webpack:///./src/main.js","webpack:///./src/billiard-element.js","webpack:///./src/my-event-emitter.js","webpack:///./node_modules/_events@1.1.1@events/events.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","BilliardElement","window","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","TypeError","create","constructor","value","writable","setPrototypeOf","__proto__","_classCallCheck","instance","Constructor","_createClass","defineProperties","target","props","length","descriptor","key","protoProps","staticProps","_require","MyEventEmitter","TouchDrive","el","this","_el","_x","_y","_history","_ALLOW_HISTORY","params","_params","event","changedTouches","clientX","clientY","preventDefault","x","y","changeX","changeY","contentWidth","contentHeight","res","timeStamp","history","push","shift","allowHistory","last","lastPreviou","time","speed","Math","sqrt","angle","atan2","_MyEventEmitter","arguments","undefined","_this","getPrototypeOf","_initElStyle","_interval","status","body","document","clientWidth","offsetWidth","clientHeight","offsetHeight","_getMoveArea","width","height","frictionSpeed","moveAngle","FPS","touchDriveCoefficient","autoAttractedByWall","attractSpeed","_moveAreaPadding","top","bottom","left","right","_touchDrive","init","addEventListener","e","start","move","_updateEl","moveRes","end","drive","con","padding","style","_this2","movePath","_getMovePath","_getNextFsMoveInfo","_move","position","parentEl","getElementsByTagName","areaWidth","areaHeight","WebkitTransform","animations","resolve","_this3","fpsTime","setInterval","coorChange","pop","clearInterval","endSpeed","averageSpeed","_getXY","distance","sin","cos","fn","reverse","_get","receiver","Function","desc","getOwnPropertyDescriptor","parent","EventEmitter","_EventEmitter","apply","_events","_maxListeners","isFunction","arg","isNumber","isObject","isUndefined","defaultMaxListeners","setMaxListeners","isNaN","emit","type","er","handler","len","args","listeners","error","Error","err","context","Array","slice","addListener","listener","newListener","warned","console","trace","on","once","g","removeListener","fired","list","splice","removeAllListeners","listenerCount","evlistener","emitter"],"mappings":"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","file":"billiard-element.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar BilliardElement = __webpack_require__(1);\nwindow.BilliardElement = BilliardElement;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _require = __webpack_require__(2),\n    MyEventEmitter = _require.MyEventEmitter;\n\nvar TouchDrive = function () {\n    function TouchDrive(el) {\n        _classCallCheck(this, TouchDrive);\n\n        this._el = el;\n        this._x = 0;\n        this._y = 0;\n        this._history = [];\n        this._ALLOW_HISTORY = 3;\n    }\n\n    _createClass(TouchDrive, [{\n        key: 'init',\n        value: function init(params) {\n            this._params = params;\n            return this;\n        }\n    }, {\n        key: 'start',\n        value: function start(event) {\n            //event.preventDefault();\n            this._x = event.changedTouches[0].clientX;\n            this._y = event.changedTouches[0].clientY;\n        }\n    }, {\n        key: 'move',\n        value: function move(event) {\n            event.preventDefault();\n            var x = event.changedTouches[0].clientX;\n            var y = event.changedTouches[0].clientY;\n            var changeX = x - this._x;\n            var changeY = y - this._y;\n            this._x = x;\n            this._y = y;\n            var p = this._params;\n            p.x += changeX;\n            p.y += changeY;\n            p.x = p.x < 0 ? 0 : p.x;\n            p.y = p.y < 0 ? 0 : p.y;\n            p.x = p.x > p.contentWidth ? p.contentWidth : p.x;\n            p.y = p.y > p.contentHeight ? p.contentHeight : p.y;\n            var res = {\n                x: x,\n                y: y,\n                timeStamp: event.timeStamp\n            };\n            var history = this._history;\n            history.push(res);\n            if (history.length > this._ALLOW_HISTORY) {\n                history.shift();\n            }\n            return this;\n        }\n    }, {\n        key: 'end',\n        value: function end(event) {\n            //event.preventDefault();\n            var history = this._history;\n            var allowHistory = this._ALLOW_HISTORY;\n            if (history.length < allowHistory) {\n                this._history = [];\n                return false;\n            };\n            //console.log(history.length);\n            var last = history[history.length - 1];\n            var lastPreviou = history[history.length - 2];\n            var changeX = last.x - lastPreviou.x;\n            var changeY = last.y - lastPreviou.y;\n            var time = last.timeStamp - lastPreviou.timeStamp;\n            var speed = Math.sqrt(changeX * changeX + changeY * changeY) * 1000 / time;\n            if (speed < 500) {\n                this._history = [];\n                return false;\n            };\n            var pi = 3.1415926535898;\n            var angle = Math.atan2(-changeY, changeX) * 180 / pi;\n            if (angle < 0) angle = 360 + angle;\n            this._history = [];\n            return {\n                speed: speed,\n                angle: angle\n            };\n        }\n    }]);\n\n    return TouchDrive;\n}();\n\nvar BilliardElement = function (_MyEventEmitter) {\n    _inherits(BilliardElement, _MyEventEmitter);\n\n    _createClass(BilliardElement, null, [{\n        key: 'create',\n        value: function create(el) {\n            var autoStart = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n            return new this(el, autoStart);\n        }\n    }]);\n\n    function BilliardElement(el) {\n        var autoStart = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n        _classCallCheck(this, BilliardElement);\n\n        var _this = _possibleConstructorReturn(this, (BilliardElement.__proto__ || Object.getPrototypeOf(BilliardElement)).call(this));\n\n        _this._el = el;\n        _this._initElStyle(el);\n        _this._interval = null;\n        _this.status = 'static'; // 'static' | 'moving'\n        var body = document.body;\n        var contentWidth = body.clientWidth - el.offsetWidth;\n        var contentHeight = body.clientHeight - el.offsetHeight;\n        var area = _this._getMoveArea(el);\n        //console.log({el: el});\n        _this._params = {\n            x: 0,\n            y: 0,\n            width: 0,\n            height: 0,\n            contentWidth: contentWidth,\n            contentHeight: contentHeight,\n            speed: 0,\n            frictionSpeed: 1000,\n            moveAngle: 0,\n            FPS: 50,\n            touchDriveCoefficient: 1,\n            autoAttractedByWall: true,\n            attractSpeed: 400\n        };\n        _this._moveAreaPadding = {\n            top: 0,\n            bottom: 0,\n            left: 0,\n            right: 0\n        };\n        _this._touchDrive = new TouchDrive(el).init(_this._params);\n        el.addEventListener('touchstart', function (e) {\n            _this._touchDrive.start(e);\n        });\n        el.addEventListener('touchmove', function (e) {\n            _this._touchDrive.move(e);\n            _this._updateEl(_this._params.x, _this._params.y);\n        });\n        el.addEventListener('touchend', function (e) {\n            var moveRes = _this._touchDrive.end(e);\n            if (!!moveRes) {\n                var speed = moveRes.speed * _this._params.touchDriveCoefficient;\n                _this.drive(speed, moveRes.angle);\n            }\n        });\n        return _this;\n    }\n\n    _createClass(BilliardElement, [{\n        key: 'config',\n        value: function config() {\n            var con = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n            var p = this._params;\n            p.width = con.width || p.width;\n            p.height = con.height || p.height;\n            p.FPS = con.FPS || p.FPS;\n            p.frictionSpeed = con.frictionSpeed || p.frictionSpeed;\n            p.touchDriveCoefficient = con.touchDriveCoefficient || p.touchDriveCoefficient;\n            var body = document.body;\n            if (!!con.width) {\n                p.contentWidth = body.clientWidth - con.width;\n            }\n            if (!!con.height) {\n                p.contentHeight = body.clientHeight - con.height;\n            }\n            p.x = con.top || p.x;\n            p.y = con.left || p.y;\n            if (!!con.right) p.x = p.contentWidth - con.right;\n            if (!!con.bottom) p.y = p.contentHeight - con.bottom;\n            this._updateEl(p.x, p.y);\n            return this;\n        }\n    }, {\n        key: 'setMoveAreaPadding',\n        value: function setMoveAreaPadding() {\n            var con = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n            var body = document.body;\n            var padding = this._moveAreaPadding;\n            var p = this._params;\n            var style = this._el.style;\n            style.top = (padding.top = con.top || padding.top) + 'px';\n            style.left = (padding.left = con.left || padding.left) + 'px';\n            padding.bottom = con.bottom || padding.bottom;\n            padding.right = con.right || padding.right;\n            p.contentWidth = body.clientWidth - p.width - padding.left - padding.right;\n            p.contentHeight = body.clientHeight - p.height - padding.top - padding.right;\n            return this;\n        }\n    }, {\n        key: 'drive',\n        value: function drive(speed, angle) {\n            var _this2 = this;\n\n            if (typeof speed !== 'number' && typeof angle !== 'number') throw 'speed or angle not matching';\n            if (this.status === 'moving') return undefined;\n            this._params.speed = speed;\n            this._params.moveAngle = angle;\n            var movePath = this._getMovePath(function (res) {\n                return _this2._getNextFsMoveInfo(_this2._params);\n            });\n            this._move(movePath);\n            return this;\n        }\n    }, {\n        key: '_initElStyle',\n        value: function _initElStyle(el) {\n            el.style.position = 'fixed';\n            el.style.top = \"0px\";\n            el.style.left = \"0px\";\n            return this;\n        }\n    }, {\n        key: '_getMoveArea',\n        value: function _getMoveArea(el) {\n            var parentEl = document.getElementsByTagName('body')[0];\n            var areaWidth = parentEl.offsetWidth - el.offsetWidth;\n            var areaHeight = parentEl.offsetHeight - el.offsetHeight;\n            return {\n                areaWidth: areaWidth,\n                areaHeight: areaHeight\n            };\n        }\n    }, {\n        key: '_updateEl',\n        value: function _updateEl(x, y) {\n            this._el.style.WebkitTransform = \"translate(\" + x + \"px,\" + y + 'px)';\n            return this;\n        }\n    }, {\n        key: '_move',\n        value: function _move(animations, resolve) {\n            var _this3 = this;\n\n            var style = this._el.style;\n            var fpsTime = 1000 / this._params.FPS;\n            this.status = 'moving';\n            this._interval = setInterval(function () {\n                var coorChange = animations.pop();\n                if (!coorChange) {\n                    clearInterval(_this3._interval);\n                    _this3.status = 'static';\n                    return;\n                };\n                _this3._updateEl(coorChange.x, coorChange.y);\n            }, fpsTime);\n            return this;\n        }\n    }, {\n        key: '_getNextFsMoveInfo',\n        value: function _getNextFsMoveInfo(params) {\n            var angle = params.moveAngle;\n            var endSpeed = params.speed - params.frictionSpeed / params.FPS;\n            if (endSpeed <= 0) {\n                endSpeed = 0;\n                return;\n            };\n            var averageSpeed = (params.speed + endSpeed) / 2;\n            params.speed = endSpeed;\n            if (params.x >= params.contentWidth) {\n                params.x = params.contentWidth;\n                if (angle > 270) {\n                    params.moveAngle = 180 - params.moveAngle;\n                } else {\n                    params.moveAngle = 180 - params.moveAngle;\n                }\n            }\n            if (params.x <= 0) {\n                params.x = 0;\n                if (angle > 180) {\n                    params.moveAngle = 180 - params.moveAngle;\n                } else {\n                    params.moveAngle = 180 - params.moveAngle;\n                }\n            }\n            if (params.y >= params.contentHeight) {\n                params.y = params.contentHeight;\n                if (angle > 270) {\n                    params.moveAngle = 360 - params.moveAngle;\n                } else {\n                    params.moveAngle = 360 - params.moveAngle;\n                }\n            }\n            if (params.y <= 0) {\n                params.y = 0;\n                if (angle > 90) {\n                    params.moveAngle = 360 - params.moveAngle;\n                } else {\n                    params.moveAngle = 360 - params.moveAngle;\n                }\n            }\n            var distance = averageSpeed / params.FPS;\n            return this._getXY(params, averageSpeed, params.moveAngle);\n        }\n    }, {\n        key: '_getXY',\n        value: function _getXY(params, speed, angle) {\n            var pai = 0.017453293;\n            var distance = speed / params.FPS;\n            var y = -distance * Math.sin(angle * pai);\n            var x = distance * Math.cos(angle * pai);\n            params.x += x;\n            params.y += y;\n            params.x = params.x < 0 ? 0 : params.x;\n            params.y = params.y < 0 ? 0 : params.y;\n            params.x = params.x > params.contentWidth ? params.contentWidth : params.x;\n            params.y = params.y > params.contentHeight ? params.contentHeight : params.y;\n            return {\n                x: params.x,\n                y: params.y\n            };\n        }\n    }, {\n        key: '_getMovePath',\n        value: function _getMovePath(fn) {\n            var movePath = [];\n            for (var i = 0; i < 100000; i++) {\n                var res = fn();\n                if (!res) break;\n                movePath.push(res);\n            }\n            movePath.reverse();\n            return movePath;\n        }\n    }, {\n        key: '_getNextFsAttractInfo',\n        value: function _getNextFsAttractInfo(params) {\n            var angle = 0;\n            if (params.x > params.contentWidth) {\n                params.x = params.contentWidth;\n                angle = 180;\n                params.speed = -params.speed;\n            }\n            var endSpeed = params.speed + params.attractSpeed / params.FPS;\n            if (endSpeed <= 0) {\n                endSpeed = 0;\n                angle = 0;\n                params.speed = -params.speed;\n                return;\n            };\n            var averageSpeed = (params.speed + endSpeed) / 2;\n            params.speed = endSpeed;\n            return this._getXY(params, averageSpeed, angle);\n        }\n    }]);\n\n    return BilliardElement;\n}(MyEventEmitter);\n\nBilliardElement.BilliardElement = BilliardElement;\nmodule.exports = BilliardElement;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _require = __webpack_require__(3),\n    EventEmitter = _require.EventEmitter;\n\nvar MyEventEmitter = function (_EventEmitter) {\n    _inherits(MyEventEmitter, _EventEmitter);\n\n    function MyEventEmitter() {\n        _classCallCheck(this, MyEventEmitter);\n\n        return _possibleConstructorReturn(this, (MyEventEmitter.__proto__ || Object.getPrototypeOf(MyEventEmitter)).apply(this, arguments));\n    }\n\n    _createClass(MyEventEmitter, [{\n        key: 'emit',\n        value: function emit() {\n            return _get(MyEventEmitter.prototype.__proto__ || Object.getPrototypeOf(MyEventEmitter.prototype), 'emit', this).apply(this, arguments);\n        }\n    }]);\n\n    return MyEventEmitter;\n}(EventEmitter);\n\nmodule.exports.MyEventEmitter = MyEventEmitter;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// billiard-element.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ea91e8013d6f9a30918b","const BilliardElement = require('./billiard-element.js');\nwindow.BilliardElement = BilliardElement;\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","const {\n    MyEventEmitter\n} = require('./my-event-emitter.js');\n\nclass TouchDrive {\n    constructor(el) {\n        this._el = el;\n        this._x = 0;\n        this._y = 0;\n        this._history = [];\n        this._ALLOW_HISTORY = 3;\n    }\n    init(params) {\n        this._params = params;\n        return this;\n    }\n    start(event) {\n        //event.preventDefault();\n        this._x = event.changedTouches[0].clientX;\n        this._y = event.changedTouches[0].clientY;\n    }\n    move(event) {\n        event.preventDefault();\n        const x = event.changedTouches[0].clientX;\n        const y = event.changedTouches[0].clientY;\n        const changeX = x - this._x;\n        const changeY = y - this._y;\n        this._x = x;\n        this._y = y;\n        let p = this._params;\n        p.x += changeX;\n        p.y += changeY;\n        p.x = p.x < 0 ? 0 : p.x;\n        p.y = p.y < 0 ? 0 : p.y;\n        p.x = p.x > p.contentWidth ? p.contentWidth : p.x;\n        p.y = p.y > p.contentHeight ? p.contentHeight : p.y;\n        const res = {\n            x: x,\n            y: y,\n            timeStamp: event.timeStamp\n        }\n        let history = this._history;\n        history.push(res);\n        if (history.length > this._ALLOW_HISTORY) {\n            history.shift();\n        }\n        return this;\n    }\n    end(event) {\n        //event.preventDefault();\n        let history = this._history;\n        const allowHistory = this._ALLOW_HISTORY;\n        if (history.length < allowHistory) {\n            this._history = [];\n            return false;\n        };\n        //console.log(history.length);\n        const last = history[history.length - 1];\n        const lastPreviou = history[history.length - 2];\n        const changeX = last.x - lastPreviou.x;\n        const changeY = last.y - lastPreviou.y;\n        const time = last.timeStamp - lastPreviou.timeStamp;\n        let speed = Math.sqrt(changeX * changeX + changeY * changeY) * 1000 / time;\n        if (speed < 500) {\n            this._history = [];\n            return false;\n        };\n        const pi = 3.1415926535898\n        let angle = Math.atan2(-changeY, changeX) * 180 / pi;\n        if (angle < 0) angle = 360 + angle;\n        this._history = [];\n        return {\n            speed: speed,\n            angle: angle\n        }\n    }\n}\nclass BilliardElement extends MyEventEmitter {\n    static create(el, autoStart = true) {\n        return new this(el, autoStart);\n    }\n    constructor(el, autoStart = true) {\n        super();\n        this._el = el;\n        this._initElStyle(el);\n        this._interval = null;\n        this.status = 'static'; // 'static' | 'moving'\n        const body = document.body;\n        const contentWidth = body.clientWidth - el.offsetWidth;\n        const contentHeight = body.clientHeight - el.offsetHeight;\n        const area = this._getMoveArea(el);\n        //console.log({el: el});\n        this._params = {\n            x: 0,\n            y: 0,\n            width: 0,\n            height: 0,\n            contentWidth: contentWidth,\n            contentHeight: contentHeight,\n            speed: 0,\n            frictionSpeed: 1000,\n            moveAngle: 0,\n            FPS: 50,\n            touchDriveCoefficient: 1,\n            autoAttractedByWall: true,\n            attractSpeed: 400\n        };\n        this._moveAreaPadding = {\n            top: 0,\n            bottom: 0,\n            left: 0,\n            right: 0\n        };\n        this._touchDrive = (new TouchDrive(el)).init(this._params);\n        el.addEventListener('touchstart', e => {\n            this._touchDrive.start(e);\n        });\n        el.addEventListener('touchmove', e => {\n            this._touchDrive.move(e);\n            this._updateEl(this._params.x, this._params.y);\n        });\n        el.addEventListener('touchend', e => {\n            let moveRes = this._touchDrive.end(e);\n            if (!!moveRes) {\n                const speed = moveRes.speed * this._params.touchDriveCoefficient;\n                this.drive(speed, moveRes.angle);\n            }\n        });\n    }\n    config(con = {}) {\n        let p = this._params;\n        p.width = con.width || p.width;\n        p.height = con.height || p.height;\n        p.FPS = con.FPS || p.FPS;\n        p.frictionSpeed = con.frictionSpeed || p.frictionSpeed;\n        p.touchDriveCoefficient = con.touchDriveCoefficient || p.touchDriveCoefficient;\n        const body = document.body;\n        if(!!con.width) {\n            p.contentWidth = body.clientWidth - con.width;\n        }\n        if(!!con.height) {\n            p.contentHeight = body.clientHeight - con.height;\n        }\n        p.x = con.top || p.x;\n        p.y = con.left || p.y;\n        if(!!con.right) p.x = p.contentWidth - con.right;\n        if(!!con.bottom) p.y = p.contentHeight - con.bottom;\n        this._updateEl(p.x, p.y);\n        return this;\n    }\n    setMoveAreaPadding(con = {}) {\n        const body = document.body;\n        let padding = this._moveAreaPadding;\n        let p = this._params;\n        let style = this._el.style;\n        style.top = (padding.top = con.top|| padding.top) + 'px';\n        style.left = (padding.left = con.left|| padding.left) + 'px';\n        padding.bottom = con.bottom|| padding.bottom;\n        padding.right = con.right|| padding.right\n        p.contentWidth = body.clientWidth - p.width - padding.left - padding.right;\n        p.contentHeight = body.clientHeight - p.height - padding.top  - padding.right;\n        return this;\n    }\n    drive(speed, angle) {\n        if (typeof speed !== 'number' && typeof angle !== 'number')\n            throw 'speed or angle not matching';\n        if (this.status === 'moving') return undefined;\n        this._params.speed = speed;\n        this._params.moveAngle = angle;\n        let movePath = this._getMovePath(res => {\n            return this._getNextFsMoveInfo(this._params);\n        });\n        this._move(movePath);\n        return this;\n    }\n    _initElStyle(el) {\n        el.style.position = 'fixed';\n        el.style.top = \"0px\";\n        el.style.left = \"0px\";\n        return this;\n    }\n    _getMoveArea(el) {\n        const parentEl = document.getElementsByTagName('body')[0];\n        const areaWidth = parentEl.offsetWidth - el.offsetWidth;\n        const areaHeight = parentEl.offsetHeight - el.offsetHeight;\n        return {\n            areaWidth: areaWidth,\n            areaHeight: areaHeight\n        }\n    }\n    _updateEl(x, y) {\n        this._el.style.WebkitTransform = \"translate(\" + x + \"px,\" + y + 'px)';\n        return this;\n    }\n    _move(animations, resolve) {\n        const style = this._el.style;\n        const fpsTime = 1000 / this._params.FPS;\n        this.status = 'moving';\n        this._interval = setInterval(() => {\n            const coorChange = animations.pop();\n            if (!coorChange) {\n                clearInterval(this._interval);\n                this.status = 'static';\n                return;\n            };\n            this._updateEl(coorChange.x, coorChange.y);\n        }, fpsTime);\n        return this;\n    }\n    _getNextFsMoveInfo(params) {\n        const angle = params.moveAngle;\n        let endSpeed = params.speed - params.frictionSpeed / params.FPS;\n        if (endSpeed <= 0) {\n            endSpeed = 0;\n            return;\n        };\n        const averageSpeed = (params.speed + endSpeed) / 2;\n        params.speed = endSpeed;\n        if (params.x >= params.contentWidth) {\n            params.x = params.contentWidth;\n            if (angle > 270) {\n                params.moveAngle = 180 - params.moveAngle;\n            } else {\n                params.moveAngle = 180 - params.moveAngle;\n            }\n        }\n        if (params.x <= 0) {\n            params.x = 0;\n            if (angle > 180) {\n                params.moveAngle = 180 - params.moveAngle;\n            } else {\n                params.moveAngle = 180 - params.moveAngle;\n            }\n        }\n        if (params.y >= params.contentHeight) {\n            params.y = params.contentHeight\n            if (angle > 270) {\n                params.moveAngle = 360 - params.moveAngle;\n            } else {\n                params.moveAngle = 360 - params.moveAngle;\n            }\n        }\n        if (params.y <= 0) {\n            params.y = 0;\n            if (angle > 90) {\n                params.moveAngle = 360 - params.moveAngle;\n            } else {\n                params.moveAngle = 360 - params.moveAngle;\n            }\n        }\n        const distance = averageSpeed / params.FPS;\n        return this._getXY(params, averageSpeed, params.moveAngle);\n    }\n    _getXY(params, speed, angle) {\n        const pai = 0.017453293;\n        const distance = speed / params.FPS;\n        const y = -distance * Math.sin(angle * pai);\n        const x = distance * Math.cos(angle * pai);\n        params.x += x;\n        params.y += y;\n        params.x = params.x < 0 ? 0 : params.x;\n        params.y = params.y < 0 ? 0 : params.y;\n        params.x = params.x > params.contentWidth ? params.contentWidth : params.x;\n        params.y = params.y > params.contentHeight ? params.contentHeight : params.y;\n        return {\n            x: params.x,\n            y: params.y\n        }\n    }\n    _getMovePath(fn) {\n        let movePath = [];\n        for (let i = 0; i < 100000; i++) {\n            const res = fn();\n            if (!res) break;\n            movePath.push(res);\n        }\n        movePath.reverse();\n        return movePath;\n    }\n    _getNextFsAttractInfo(params) {\n        let angle = 0;\n        if (params.x > params.contentWidth) {\n            params.x = params.contentWidth;\n            angle = 180;\n            params.speed = -params.speed;\n        }\n        let endSpeed = params.speed + params.attractSpeed / params.FPS;\n        if (endSpeed <= 0) {\n            endSpeed = 0;\n            angle = 0;\n            params.speed = -params.speed;\n            return;\n        };\n        const averageSpeed = (params.speed + endSpeed) / 2;\n        params.speed = endSpeed;\n        return this._getXY(params, averageSpeed, angle);\n    }\n}\n\nBilliardElement.BilliardElement = BilliardElement;\nmodule.exports = BilliardElement;\n\n\n// WEBPACK FOOTER //\n// ./src/billiard-element.js","const { EventEmitter } = require('events');\nclass MyEventEmitter extends EventEmitter {\n    emit() {\n        return super.emit.apply(this,arguments);\n    }\n}\nmodule.exports.MyEventEmitter = MyEventEmitter;\n\n\n// WEBPACK FOOTER //\n// ./src/my-event-emitter.js","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_events@1.1.1@events/events.js\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}