!function(t,e){for(var n in e)t[n]=e[n]}(this,function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=2)}([,,function(t,e,n){var i=n(3);angular.module("billiard-element",[]).directive("billiardElement",[function(){return{restrict:"A",scope:{billiardElement:"="},multiElement:!0,link:function(t,e,n){var r=new i(e[0]),o=t.billiardElement||{};r.setConfig(o),"function"==typeof o.billiardElCreated&&o.billiardElCreated(r)}}}])},function(t,e,n){var i=n(4);t.exports=i},function(t,e){t.exports=function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=0)}([function(t,e,n){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(1),a=function(){var t=document.createElement("div");t.style.cssText="-webkit-transition:all .1s; -moz-transition:all .1s; -o-transition:all .1s; -ms-transition:all .1s; transition:all .1s;";var e=t.style;return e.webkitTransition?"WebkitTransform":e.MozTransition?"MozTransform":e.oTransition?"oTransform":e.msTransition?"msTransform":"transform"}(),s=function(){function t(e){var n=this;i(this,t),this._el=e,e.style.position="fixed",this._interval=null,this.status="uninit",this._moveStatus={x:0,y:0,MAX_X:0,MAX_Y:0,FPS:50,speed:0,frictionSpeed:1e3,touchDriveCoefficient:1,limit:{minX:0,maxX:0,minY:0,maxY:0}},this._config={moveAreaMarginLeft:0,moveAreaMarginRight:0,moveAreaMarginTop:0,moveAreaMarginBottom:0,FPS:50,frictionSpeed:1e3,touchDriveCoefficient:1},this._touchDrive=new o(e).init(this._moveStatus),e.addEventListener("touchstart",function(t){n.updateElPosition(!1),n.status="moving",n._touchDrive.start(t)}),e.addEventListener("touchmove",function(t){n._touchDrive.move(t),n._updateEl(n._moveStatus.x,n._moveStatus.y)}),e.addEventListener("touchend",function(t){n.status="static";var e=n._touchDrive.end(t);if(e){var i=e.speed*n._moveStatus.touchDriveCoefficient;n.drive(i,e.angle)}})}return r(t,null,[{key:"create",value:function(t){return new this(t)}}]),r(t,[{key:"getConfig",value:function(){return JSON.parse(JSON.stringify(this._config))}},{key:"setConfig",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._config;for(var n in t)(e[n]||0===e[n]||!1===e[n])&&(e[n]=t[n]);return this.updateElPosition(),this._useConfig(),this}},{key:"_useConfig",value:function(){var t=this._config,e=this._moveStatus,n=this._moveStatus.limit;return e.FPS=t.FPS,e.frictionSpeed=t.frictionSpeed,e.touchDriveCoefficient=t.touchDriveCoefficient,n.minX=t.moveAreaMarginLeft,n.minY=t.moveAreaMarginTop,n.maxX=e.MAX_X-t.moveAreaMarginRight,n.maxY=e.MAX_Y-t.moveAreaMarginBottom,this}},{key:"drive",value:function(t,e){var n=this;if("number"!=typeof t&&"number"!=typeof e)throw"speed or angle not matching";if("moving"!==this.status){this.updateElPosition(!1);var i=this._moveStatus;i.speed=t,i.moveAngle=e;var r=this._getMovePath(function(t){return n._getNextFsMoveInfo(i)});return this._move(r),this}}},{key:"updateElPosition",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if("uninit"===this.status||t){var e=this._el,n=this._moveStatus,i=this._moveStatus.limit;n.x=e.offsetLeft,n.y=e.offsetTop;var r=document.documentElement;return i.maxX=n.MAX_X=r.clientWidth-e.offsetWidth,i.maxY=n.MAX_Y=r.clientHeight-e.offsetHeight,e.style.left="0px",e.style.top="0px",this.status="static",this._updateEl(n.x,n.y),this}}},{key:"_updateEl",value:function(t,e){return this._el.style[a]="translate("+t+"px,"+e+"px)",this}},{key:"_move",value:function(t,e){var n=this,i=1e3/this._moveStatus.FPS;return this.status="moving",this._interval=setInterval(function(){var e=t.pop();if(!e)return clearInterval(n._interval),void(n.status="static");n._updateEl(e.x,e.y)},i),this}},{key:"_getNextFsMoveInfo",value:function(t){var e=(t.moveAngle,t.limit),n=t.speed-t.frictionSpeed/t.FPS;if(n<=0)return void(n=0);var i=(t.speed+n)/2;return t.speed=n,t.x>=e.maxX&&(t.x=e.maxX,t.moveAngle=180-t.moveAngle),t.x<=e.minX&&(t.x=e.minX,t.moveAngle=180-t.moveAngle),t.y>=e.maxY&&(t.y=e.maxY,t.moveAngle=360-t.moveAngle),t.y<=e.minY&&(t.y=e.minY,t.moveAngle=360-t.moveAngle),t.FPS,this._getXY(t,i,t.moveAngle)}},{key:"_getXY",value:function(t,e,n){var i=t.limit,r=e/t.FPS,o=-r*Math.sin(.017453293*n),a=r*Math.cos(.017453293*n);return t.x+=a,t.y+=o,t.x=t.x<i.minX?i.minX:t.x,t.y=t.y<i.minY?i.minY:t.y,t.x=t.x>i.maxX?i.maxX:t.x,t.y=t.y>i.maxY?i.maxY:t.y,{x:t.x,y:t.y}}},{key:"_getMovePath",value:function(t){for(var e=[],n=0;n<1e5;n++){var i=t();if(!i)break;e.push(i)}return e.reverse(),e}},{key:"_getNextFsAttractInfo",value:function(t){var e=0;t.x>t.contentWidth&&(t.x=t.contentWidth,e=180,t.speed=-t.speed);var n=t.speed+t.attractSpeed/t.FPS;if(n<=0)return n=0,e=0,void(t.speed=-t.speed);var i=(t.speed+n)/2;return t.speed=n,this._getXY(t,i,e)}}]),t}();s.BilliardElement=s,t.exports=s},function(t,e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){n(this,t),this._el=e,this._x=0,this._y=0,this._history=[],this._ALLOW_HISTORY=3}return i(t,[{key:"init",value:function(t){return this._moveStatus=t,this}},{key:"start",value:function(t){this._x=t.changedTouches[0].clientX,this._y=t.changedTouches[0].clientY}},{key:"move",value:function(t){t.preventDefault();var e=t.changedTouches[0].clientX,n=t.changedTouches[0].clientY,i=e-this._x,r=n-this._y;this._x=e,this._y=n;var o=this._moveStatus,a=this._moveStatus.limit;o.x+=i,o.y+=r,o.x=o.x<a.minX?a.minX:o.x,o.y=o.y<a.minY?a.minY:o.y,o.x=o.x>a.maxX?a.maxX:o.x,o.y=o.y>a.maxY?a.maxY:o.y;var s={x:e,y:n,timeStamp:t.timeStamp},u=this._history;return u.push(s),u.length>this._ALLOW_HISTORY&&u.shift(),this}},{key:"end",value:function(t){var e=this._history,n=this._ALLOW_HISTORY;if(e.length<n)return this._history=[],!1;var i=e[e.length-1],r=e[e.length-2],o=i.x-r.x,a=i.y-r.y,s=i.timeStamp-r.timeStamp,u=1e3*Math.sqrt(o*o+a*a)/s;if(u<500)return this._history=[],!1;var l=180*Math.atan2(-a,o)/3.1415926535898;return l<0&&(l=360+l),this._history=[],{speed:u,angle:l}}}]),t}();r.BilliardTouchDrive=r,t.exports=r}])}]));
//# sourceMappingURL=billiard-element-angularjs.min.js.map