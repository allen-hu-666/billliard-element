!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=0)}([function(t,e,n){var i=n(1);window.BilliardElement=i},function(t,e,n){function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),h=n(2),a=h.MyEventEmitter,u=function(){function t(e){o(this,t),this._el=e,this._x=0,this._y=0,this._history=[],this._ALLOW_HISTORY=3}return s(t,[{key:"init",value:function(t){return this._params=t,this}},{key:"start",value:function(t){this._x=t.changedTouches[0].clientX,this._y=t.changedTouches[0].clientY}},{key:"move",value:function(t){t.preventDefault();var e=t.changedTouches[0].clientX,n=t.changedTouches[0].clientY,i=e-this._x,r=n-this._y;this._x=e,this._y=n;var o=this._params;o.x+=i,o.y+=r,o.x=o.x<0?0:o.x,o.y=o.y<0?0:o.y,o.x=o.x>o.contentWidth?o.contentWidth:o.x,o.y=o.y>o.contentHeight?o.contentHeight:o.y;var s={x:e,y:n,timeStamp:t.timeStamp},h=this._history;return h.push(s),h.length>this._ALLOW_HISTORY&&h.shift(),this}},{key:"end",value:function(t){var e=this._history,n=this._ALLOW_HISTORY;if(e.length<n)return this._history=[],!1;var i=e[e.length-1],r=e[e.length-2],o=i.x-r.x,s=i.y-r.y,h=i.timeStamp-r.timeStamp,a=1e3*Math.sqrt(o*o+s*s)/h;if(a<500)return this._history=[],!1;var u=180*Math.atan2(-s,o)/3.1415926535898;return u<0&&(u=360+u),this._history=[],{speed:a,angle:u}}}]),t}(),l=function(t){function e(t){!(arguments.length>1&&void 0!==arguments[1])||arguments[1];o(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));n._el=t,n._initElStyle(t),n._interval=null,n.status="static";var r=document.body,s=r.clientWidth-t.offsetWidth,h=r.clientHeight-t.offsetHeight;n._getMoveArea(t);return n._params={x:0,y:0,width:0,height:0,contentWidth:s,contentHeight:h,speed:0,frictionSpeed:1e3,moveAngle:0,FPS:50,touchDriveCoefficient:1,autoAttractedByWall:!0,attractSpeed:400},n._moveAreaPadding={top:0,bottom:0,left:0,right:0},n._touchDrive=new u(t).init(n._params),t.addEventListener("touchstart",function(t){n._touchDrive.start(t)}),t.addEventListener("touchmove",function(t){n._touchDrive.move(t),n._updateEl(n._params.x,n._params.y)}),t.addEventListener("touchend",function(t){var e=n._touchDrive.end(t);if(e){var i=e.speed*n._params.touchDriveCoefficient;n.drive(i,e.angle)}}),n}return r(e,t),s(e,null,[{key:"create",value:function(t){return new this(t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}}]),s(e,[{key:"config",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._params;e.width=t.width||e.width,e.height=t.height||e.height,e.FPS=t.FPS||e.FPS,e.frictionSpeed=t.frictionSpeed||e.frictionSpeed,e.touchDriveCoefficient=t.touchDriveCoefficient||e.touchDriveCoefficient;var n=document.body;return t.width&&(e.contentWidth=n.clientWidth-t.width),t.height&&(e.contentHeight=n.clientHeight-t.height),e.x=t.top||e.x,e.y=t.left||e.y,t.right&&(e.x=e.contentWidth-t.right),t.bottom&&(e.y=e.contentHeight-t.bottom),this._updateEl(e.x,e.y),this}},{key:"setMoveAreaPadding",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=document.body,n=this._moveAreaPadding,i=this._params,r=this._el.style;return r.top=(n.top=t.top||n.top)+"px",r.left=(n.left=t.left||n.left)+"px",n.bottom=t.bottom||n.bottom,n.right=t.right||n.right,i.contentWidth=e.clientWidth-i.width-n.left-n.right,i.contentHeight=e.clientHeight-i.height-n.top-n.right,this}},{key:"drive",value:function(t,e){var n=this;if("number"!=typeof t&&"number"!=typeof e)throw"speed or angle not matching";if("moving"!==this.status){this._params.speed=t,this._params.moveAngle=e;var i=this._getMovePath(function(t){return n._getNextFsMoveInfo(n._params)});return this._move(i),this}}},{key:"_initElStyle",value:function(t){return t.style.position="fixed",t.style.top="0px",t.style.left="0px",this}},{key:"_getMoveArea",value:function(t){var e=document.getElementsByTagName("body")[0];return{areaWidth:e.offsetWidth-t.offsetWidth,areaHeight:e.offsetHeight-t.offsetHeight}}},{key:"_updateEl",value:function(t,e){return this._el.style.WebkitTransform="translate("+t+"px,"+e+"px)",this}},{key:"_move",value:function(t,e){var n=this,i=(this._el.style,1e3/this._params.FPS);return this.status="moving",this._interval=setInterval(function(){var e=t.pop();if(!e)return clearInterval(n._interval),void(n.status="static");n._updateEl(e.x,e.y)},i),this}},{key:"_getNextFsMoveInfo",value:function(t){var e=(t.moveAngle,t.speed-t.frictionSpeed/t.FPS);if(e<=0)return void(e=0);var n=(t.speed+e)/2;t.speed=e,t.x>=t.contentWidth&&(t.x=t.contentWidth,t.moveAngle=180-t.moveAngle),t.x<=0&&(t.x=0,t.moveAngle=180-t.moveAngle),t.y>=t.contentHeight&&(t.y=t.contentHeight,t.moveAngle=360-t.moveAngle),t.y<=0&&(t.y=0,t.moveAngle=360-t.moveAngle);t.FPS;return this._getXY(t,n,t.moveAngle)}},{key:"_getXY",value:function(t,e,n){var i=e/t.FPS,r=-i*Math.sin(.017453293*n),o=i*Math.cos(.017453293*n);return t.x+=o,t.y+=r,t.x=t.x<0?0:t.x,t.y=t.y<0?0:t.y,t.x=t.x>t.contentWidth?t.contentWidth:t.x,t.y=t.y>t.contentHeight?t.contentHeight:t.y,{x:t.x,y:t.y}}},{key:"_getMovePath",value:function(t){for(var e=[],n=0;n<1e5;n++){var i=t();if(!i)break;e.push(i)}return e.reverse(),e}},{key:"_getNextFsAttractInfo",value:function(t){var e=0;t.x>t.contentWidth&&(t.x=t.contentWidth,e=180,t.speed=-t.speed);var n=t.speed+t.attractSpeed/t.FPS;if(n<=0)return n=0,e=0,void(t.speed=-t.speed);var i=(t.speed+n)/2;return t.speed=n,this._getXY(t,i,e)}}]),e}(a);l.BilliardElement=l,t.exports=l},function(t,e,n){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),h=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;if(void 0!==s)return s.call(i)},a=n(3),u=a.EventEmitter,l=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),s(e,[{key:"emit",value:function(){return h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"emit",this).apply(this,arguments)}}]),e}(u);t.exports.MyEventEmitter=l},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function r(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!r(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,r,h,a,u;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(n=this._events[t],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:h=Array.prototype.slice.call(arguments,1),n.apply(this,h)}else if(o(n))for(h=Array.prototype.slice.call(arguments,1),u=n.slice(),r=u.length,a=0;a<r;a++)u[a].apply(this,h);return!0},n.prototype.addListener=function(t,e){var r;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,r,s,h;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],s=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(h=s;h-- >0;)if(n[h]===e||n[h].listener&&n[h].listener===e){r=h;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}}]);
//# sourceMappingURL=billiard-element.min.js.map