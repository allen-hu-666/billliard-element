!function(t,e){for(var i in e)t[i]=e[i]}(this,function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=0)}([function(t,e,i){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(1),a=function(){var t=document.createElement("div");t.style.cssText="-webkit-transition:all .1s; -moz-transition:all .1s; -o-transition:all .1s; -ms-transition:all .1s; transition:all .1s;";var e=t.style;return e.webkitTransition?"WebkitTransform":e.MozTransition?"MozTransform":e.oTransition?"oTransform":e.msTransition?"msTransform":"transform"}(),s=function(){function t(e){var i=this;n(this,t),this._el=e,e.style.position="fixed",this._interval=null,this.status="uninit",this._moveStatus={x:0,y:0,MAX_X:0,MAX_Y:0,FPS:50,speed:0,frictionSpeed:1e3,touchDriveCoefficient:1,limit:{minX:0,maxX:0,minY:0,maxY:0}},this._config={moveAreaMarginLeft:0,moveAreaMarginRight:0,moveAreaMarginTop:0,moveAreaMarginBottom:0,FPS:50,frictionSpeed:1e3,touchDriveCoefficient:1},this._touchDrive=new o(e).init(this._moveStatus),e.addEventListener("touchstart",function(t){i.updateElPosition(!1),i.status="moving",i._touchDrive.start(t)}),e.addEventListener("touchmove",function(t){i._touchDrive.move(t),i._updateEl(i._moveStatus.x,i._moveStatus.y)}),e.addEventListener("touchend",function(t){i.status="static";var e=i._touchDrive.end(t);if(e){var n=e.speed*i._moveStatus.touchDriveCoefficient;i.drive(n,e.angle)}})}return r(t,null,[{key:"create",value:function(t){return new this(t)}}]),r(t,[{key:"getConfig",value:function(){return JSON.parse(JSON.stringify(this._config))}},{key:"setConfig",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._config;for(var i in t)(e[i]||0===e[i]||!1===e[i])&&(e[i]=t[i]);return this.updateElPosition(),this._useConfig(),this}},{key:"_useConfig",value:function(){var t=this._config,e=this._moveStatus,i=this._moveStatus.limit;return e.FPS=t.FPS,e.frictionSpeed=t.frictionSpeed,e.touchDriveCoefficient=t.touchDriveCoefficient,i.minX=t.moveAreaMarginLeft,i.minY=t.moveAreaMarginTop,i.maxX=e.MAX_X-t.moveAreaMarginRight,i.maxY=e.MAX_Y-t.moveAreaMarginBottom,this}},{key:"drive",value:function(t,e){var i=this;if("number"!=typeof t&&"number"!=typeof e)throw"speed or angle not matching";if("moving"!==this.status){this.updateElPosition(!1);var n=this._moveStatus;n.speed=t,n.moveAngle=e;var r=this._getMovePath(function(t){return i._getNextFsMoveInfo(n)});return this._move(r),this}}},{key:"updateElPosition",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if("uninit"===this.status||t){var e=this._el,i=this._moveStatus,n=this._moveStatus.limit;i.x=e.offsetLeft,i.y=e.offsetTop;var r=document.documentElement;return n.maxX=i.MAX_X=r.clientWidth-e.offsetWidth,n.maxY=i.MAX_Y=r.clientHeight-e.offsetHeight,e.style.left="0px",e.style.top="0px",this.status="static",this._updateEl(i.x,i.y),this}}},{key:"_updateEl",value:function(t,e){return this._el.style[a]="translate("+t+"px,"+e+"px)",this}},{key:"_move",value:function(t,e){var i=this,n=1e3/this._moveStatus.FPS;return this.status="moving",this._interval=setInterval(function(){var e=t.pop();if(!e)return clearInterval(i._interval),void(i.status="static");i._updateEl(e.x,e.y)},n),this}},{key:"_getNextFsMoveInfo",value:function(t){var e=(t.moveAngle,t.limit),i=t.speed-t.frictionSpeed/t.FPS;if(i<=0)return void(i=0);var n=(t.speed+i)/2;t.speed=i,t.x>=e.maxX&&(t.x=e.maxX,t.moveAngle=180-t.moveAngle),t.x<=e.minX&&(t.x=e.minX,t.moveAngle=180-t.moveAngle),t.y>=e.maxY&&(t.y=e.maxY,t.moveAngle=360-t.moveAngle),t.y<=e.minY&&(t.y=e.minY,t.moveAngle=360-t.moveAngle);t.FPS;return this._getXY(t,n,t.moveAngle)}},{key:"_getXY",value:function(t,e,i){var n=t.limit,r=e/t.FPS,o=-r*Math.sin(.017453293*i),a=r*Math.cos(.017453293*i);return t.x+=a,t.y+=o,t.x=t.x<n.minX?n.minX:t.x,t.y=t.y<n.minY?n.minY:t.y,t.x=t.x>n.maxX?n.maxX:t.x,t.y=t.y>n.maxY?n.maxY:t.y,{x:t.x,y:t.y}}},{key:"_getMovePath",value:function(t){for(var e=[],i=0;i<1e5;i++){var n=t();if(!n)break;e.push(n)}return e.reverse(),e}},{key:"_getNextFsAttractInfo",value:function(t){var e=0;t.x>t.contentWidth&&(t.x=t.contentWidth,e=180,t.speed=-t.speed);var i=t.speed+t.attractSpeed/t.FPS;if(i<=0)return i=0,e=0,void(t.speed=-t.speed);var n=(t.speed+i)/2;return t.speed=i,this._getXY(t,n,e)}}]),t}();s.BilliardElement=s,t.exports=s},function(t,e){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(e){i(this,t),this._el=e,this._x=0,this._y=0,this._history=[],this._ALLOW_HISTORY=3}return n(t,[{key:"init",value:function(t){return this._moveStatus=t,this}},{key:"start",value:function(t){this._x=t.changedTouches[0].clientX,this._y=t.changedTouches[0].clientY}},{key:"move",value:function(t){t.preventDefault();var e=t.changedTouches[0].clientX,i=t.changedTouches[0].clientY,n=e-this._x,r=i-this._y;this._x=e,this._y=i;var o=this._moveStatus,a=this._moveStatus.limit;o.x+=n,o.y+=r,o.x=o.x<a.minX?a.minX:o.x,o.y=o.y<a.minY?a.minY:o.y,o.x=o.x>a.maxX?a.maxX:o.x,o.y=o.y>a.maxY?a.maxY:o.y;var s={x:e,y:i,timeStamp:t.timeStamp},u=this._history;return u.push(s),u.length>this._ALLOW_HISTORY&&u.shift(),this}},{key:"end",value:function(t){var e=this._history,i=this._ALLOW_HISTORY;if(e.length<i)return this._history=[],!1;var n=e[e.length-1],r=e[e.length-2],o=n.x-r.x,a=n.y-r.y,s=n.timeStamp-r.timeStamp,u=1e3*Math.sqrt(o*o+a*a)/s;if(u<500)return this._history=[],!1;var v=180*Math.atan2(-a,o)/3.1415926535898;return v<0&&(v=360+v),this._history=[],{speed:u,angle:v}}}]),t}();r.BilliardTouchDrive=r,t.exports=r}]));
//# sourceMappingURL=billiard-element.min.js.map